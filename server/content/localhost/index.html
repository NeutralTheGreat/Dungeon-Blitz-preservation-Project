<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Play Dungeon Blitz</title>
  <script src="js/swfobject.min.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: #000;
      overflow: hidden;
    }

    #game-container {
      width: 100%;
      height: 100%;
    }

    #flash-hint {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #aaa;
      font-family: sans-serif;
      text-align: center;
      pointer-events: none;
    }

    #fallback {
      display: none;
      color: #ccc;
      font-family: sans-serif;
      text-align: center;
      padding-top: 20vh;
    }

    a { color: #6cf; }
  </style>
</head>

<body>

  <div id="game-container"></div>

  <div id="flash-hint">
    <div>
      <p>Waiting for Adobe Flash Player…</p>
      <p style="font-size:0.9em; opacity:0.7">
        Click “Allow” in your browser’s address bar
      </p>
    </div>
  </div>

  <!-- Hard fallback if Flash is missing -->
  <div id="fallback">
    <h2>Adobe Flash Player Required</h2>
    <p>
      Enable Flash for this site when prompted,<br>
      or use the Flash Projector.
    </p>
    <p>
      • <a href="https://www.adobe.com/support/flashplayer/debug_downloads.html">
        Flash Projector (recommended)
      </a>
    </p>
  </div>

  <script>
    const swfUrl = "p/cbv/DungeonBlitz.swf?fv=cbq&gv=cbv";

    function showFallback() {
      document.getElementById("flash-hint").style.display = "none";
      document.getElementById("fallback").style.display = "block";
    }

    function hideHint() {
      const hint = document.getElementById("flash-hint");
      if (hint) hint.style.display = "none";
    }

    // Attempt native Flash immediately
    swfobject.embedSWF(
      swfUrl,
      "game-container",
      "100%",
      "100%",
      "10.0.0",
      null,
      { fv: "cbq", gv: "cbv" },
      { allowScriptAccess: "always", allowFullScreen: "true" },
      { id: "DungeonBlitz", name: "DungeonBlitz" },
      function (e) {
        if (!e.success) {
          // Flash not installed or unavailable
          showFallback();
        }
      }
    );

    // Give Flash time to initialize after permission
    setTimeout(hideHint, 2500);
  </script>
</body>
</html>
